@model GP_MVC.ViewModels.ChangePasswordViewModel
@{
    ViewData["Title"] = "ChangePassword";
    Layout = "~/Areas/Teacher/Views/Shared/_Layout.cshtml";
}

<div class="br-pagetitle">
    <h3 class="text-info mr-3">Change Password</h3>
</div><!-- d-flex -->
<div class="br-pagebody">
    <div class="br-section-wrapper">
        <div class="row">
            <div class="col-md-6">
                <form id="changePasswordForm" method="post" asp-action="Password" asp-controller="Home" enctype="multipart/form-data">
                    <div style="margin-bottom: 10px;">
                        <label for="oldPassword" class="form-control-label text-dark font-weight-bold">Current Password:</label>
                        <br>
                        <input type="password" id="oldPassword" class="form-control" name="oldPassword" style="padding: 6px; width: 100%; font-size: 12px;">
                        <span class="text-danger" id="oldPasswordError" style="font-size: 12px;"></span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <label for="newPassword" class="form-control-label text-dark font-weight-bold">New Password:</label>
                        <br>
                        <input type="password" id="newPassword" class="form-control" name="newPassword" style="padding: 6px; width: 100%; font-size: 12px;">
                        <span class="text-danger" id="newPasswordError" style="font-size: 12px;"></span>
                    </div>
                    <div class="d-flex justify-content-center mt-3">
                        <button type="submit" id="changePasswordButton" class="btn btn-primary">Change Password</button>
                    </div>
                </form>
            </div>
            <div class="col-md-6">
                <img src="~/OIP.jpeg" alt="Change Password" style="width: 100%; height: auto;">
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        $('#changePasswordForm').submit(function (e) {
            var oldPassword = $('#oldPassword').val();
            var newPassword = $('#newPassword').val();

            if (oldPassword.trim() === '') {
                $('#oldPasswordError').text('Please enter the current password.');
                e.preventDefault();
            }

    @if (Model != null && Model.X == 2)
    {
        <text>
                    $(document).ready(function () {
                        $('#oldPasswordError').text('You must enter both the current password and the new password.');
                    });
        </text>
    }

                if (newPassword.trim() === '') {
                $('#newPasswordError').text('Please enter the new password.');
                e.preventDefault();
            } else if (newPassword.length < 6) {
                $('#newPasswordError').text('The new password must be at least 6 characters long.');
                e.preventDefault();
            } else if (!/\d/.test(newPassword) || !/[a-z]/.test(newPassword) || !/[A-Z]/.test(newPassword)) {
                $('#newPasswordError').text('The new password must contain uppercase, lowercase letters, and numbers.');
                e.preventDefault();
            } else {
                $('#newPasswordError').text('');
            }
        });
    });
</script>